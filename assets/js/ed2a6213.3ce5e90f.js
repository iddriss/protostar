"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[731],{3905:function(t,e,n){n.d(e,{Zo:function(){return p},kt:function(){return f}});var r=n(7294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var c=r.createContext({}),l=function(t){var e=r.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},p=function(t){var e=l(t.components);return r.createElement(c.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},u=r.forwardRef((function(t,e){var n=t.components,o=t.mdxType,a=t.originalType,c=t.parentName,p=i(t,["components","mdxType","originalType","parentName"]),u=l(n),f=o,m=u["".concat(c,".").concat(f)]||u[f]||d[f]||a;return n?r.createElement(m,s(s({ref:e},p),{},{components:n})):r.createElement(m,s({ref:e},p))}));function f(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var a=n.length,s=new Array(a);s[0]=u;var i={};for(var c in e)hasOwnProperty.call(e,c)&&(i[c]=e[c]);i.originalType=t,i.mdxType="string"==typeof t?t:o,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4771:function(t,e,n){n.r(e),n.d(e,{assets:function(){return c},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return a},metadata:function(){return i},toc:function(){return l}});var r=n(3117),o=(n(7294),n(3905));const a={},s="End-to-end tests",i={unversionedId:"tutorials/testing/e2e",id:"tutorials/testing/e2e",title:"End-to-end tests",description:"There are three main levels of software testing: unit tests, integration tests and end-to-end tests.",source:"@site/docs/tutorials/07-testing/04-e2e.md",sourceDirName:"tutorials/07-testing",slug:"/tutorials/testing/e2e",permalink:"/protostar/docs/tutorials/testing/e2e",draft:!1,editUrl:"https://github.com/software-mansion/protostar/tree/master/website/docs/tutorials/07-testing/04-e2e.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorials",previous:{title:"Strategies",permalink:"/protostar/docs/tutorials/testing/fuzzing/strategies"},next:{title:"Understanding Cairo packages",permalink:"/protostar/docs/tutorials/cairo-1-support/understanding-cairo-packages"}},c={},l=[{value:"Recommended approach",id:"recommended-approach",level:2},{value:"Testing standalone contracts",id:"testing-standalone-contracts",level:3}],p={toc:l};function d(t){let{components:e,...n}=t;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"end-to-end-tests"},"End-to-end tests"),(0,o.kt)("p",null,"There are three main levels of software testing: unit tests, integration tests and end-to-end tests."),(0,o.kt)("p",null,"Protostar provides an environment to write unit tests for Starknet smart contracts\nin Cairo language itself.\nWith the help of cheatcodes like ",(0,o.kt)("a",{parentName:"p",href:"/protostar/docs/tutorials/testing/cheatcodes/deploy-contract"},(0,o.kt)("inlineCode",{parentName:"a"},"deploy_contract"))," it is also easy to write integration tests,\ndeploying single or multiple contracts and examining internal behaviour of such small systems."),(0,o.kt)("h2",{id:"recommended-approach"},"Recommended approach"),(0,o.kt)("p",null,"In end-to-end testing, the goal is to examine interactions not only within a system of contracts\ndeployed on the blockchain, but also to examine interactions triggered by external services,\nlike web frontends, and observing effects happening within these services themselves."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"As an example, an end-to-end test of a voting application could trigger a click on a ",(0,o.kt)("em",{parentName:"p"},"Vote")," button,\ncausing a transaction being executed on the blockchain.\nThe test waits for the transaction to be accepted, then examines changes of the publicly available\nstate of voting contract, e.g. the final result of the voting.")),(0,o.kt)("p",null,"End-to-end testing should focus on the bigger picture of the whole system,\nnot only the smart contracts.\nModifications and readings of the on-chain state should be done through exposed interfaces\nof contracts.\nTherefore, it is recommended to include end-to-end tests in test suites of client applications,\nimplemented in their technologies.\nThe following tools are suggested to set up the described testing environment:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://shard-labs.github.io/starknet-devnet/"},"Starknet Devnet")," for running a local Starknet network,"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://starknet.io/building-on-starknet/developer-tools/#libraries"},"Starknet SDKs")," like ",(0,o.kt)("a",{parentName:"li",href:"https://www.starknetjs.com/"},"Starknet.js")," or ",(0,o.kt)("a",{parentName:"li",href:"https://starknetpy.rtfd.io/"},"Starknet.py")," for ",(0,o.kt)("a",{parentName:"li",href:"/protostar/docs/tutorials/interacting-with-starknet/"},"interacting with Starknet")," from tests'\ncode,"),(0,o.kt)("li",{parentName:"ol"},"Protostar CLI for ",(0,o.kt)("a",{parentName:"li",href:"/protostar/docs/tutorials/compiling#compiling-your-project"},"building contracts")," and ",(0,o.kt)("a",{parentName:"li",href:"/protostar/docs/tutorials/interacting-with-starknet/"},"deploying")," in tests'\nsetup phases and CI.")),(0,o.kt)("h3",{id:"testing-standalone-contracts"},"Testing standalone contracts"),(0,o.kt)("p",null,"In case the smart contracts are standalone and supposed to be used by independent clients,\none could write the test suite as an independent project using SDKs in general purpose languages,\nfor example, in ",(0,o.kt)("a",{parentName:"p",href:"https://jestjs.io/"},"Jest")," and ",(0,o.kt)("a",{parentName:"p",href:"https://www.starknetjs.com/"},"Starknet.js")," or ",(0,o.kt)("a",{parentName:"p",href:"https://pytest.org/"},"pytest")," and ",(0,o.kt)("a",{parentName:"p",href:"https://starknetpy.rtfd.io/"},"Starknet.py"),"."))}d.isMDXComponent=!0}}]);