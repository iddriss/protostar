"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8940],{3905:function(t,e,r){r.d(e,{Zo:function(){return u},kt:function(){return d}});var n=r(7294);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r,n,a={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}var c=n.createContext({}),l=function(t){var e=n.useContext(c),r=e;return t&&(r="function"==typeof t?t(e):i(i({},e),t)),r},u=function(t){var e=l(t.components);return n.createElement(c.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},p=n.forwardRef((function(t,e){var r=t.components,a=t.mdxType,o=t.originalType,c=t.parentName,u=s(t,["components","mdxType","originalType","parentName"]),p=l(r),d=a,f=p["".concat(c,".").concat(d)]||p[d]||m[d]||o;return r?n.createElement(f,i(i({ref:e},u),{},{components:r})):n.createElement(f,i({ref:e},u))}));function d(t,e){var r=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var o=r.length,i=new Array(o);i[0]=p;var s={};for(var c in e)hasOwnProperty.call(e,c)&&(s[c]=e[c]);s.originalType=t,s.mdxType="string"==typeof t?t:a,i[1]=s;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},2991:function(t,e,r){r.d(e,{Z:function(){return k}});var n=r(7294),a=r(4334),o=r(2802),i=r(9960),s=r(3919),c=r(5999),l="cardContainer_fWXF",u="cardTitle_rnsV",m="cardDescription_PWke";function p(t){let{href:e,children:r}=t;return n.createElement(i.Z,{href:e,className:(0,a.Z)("card padding--lg",l)},r)}function d(t){let{href:e,icon:r,title:o,description:i}=t;return n.createElement(p,{href:e},n.createElement("h2",{className:(0,a.Z)("text--truncate",u),title:o},r," ",o),i&&n.createElement("p",{className:(0,a.Z)("text--truncate",m),title:i},i))}function f(t){let{item:e}=t;const r=(0,o.Wl)(e);return r?n.createElement(d,{href:r,icon:"\ud83d\uddc3\ufe0f",title:e.label,description:(0,c.I)({message:"{count} items",id:"theme.docs.DocCard.categoryDescription",description:"The default description for a category card in the generated index about how many items this category includes"},{count:e.items.length})}):null}function h(t){let{item:e}=t;const r=(0,s.Z)(e.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",a=(0,o.xz)(e.docId??void 0);return n.createElement(d,{href:e.href,icon:r,title:e.label,description:null==a?void 0:a.description})}function g(t){let{item:e}=t;switch(e.type){case"link":return n.createElement(h,{item:e});case"category":return n.createElement(f,{item:e});default:throw new Error(`unknown item type ${JSON.stringify(e)}`)}}function y(t){let{className:e}=t;const r=(0,o.jA)();return n.createElement(k,{items:r.items,className:e})}function k(t){const{items:e,className:r}=t;if(!e)return n.createElement(y,t);const i=(0,o.MN)(e);return n.createElement("section",{className:(0,a.Z)("row",r)},i.map(((t,e)=>n.createElement("article",{key:e,className:"col col--6 margin-bottom--lg"},n.createElement(g,{item:t})))))}},8099:function(t,e,r){r.r(e),r.d(e,{assets:function(){return u},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return m}});var n=r(3117),a=(r(7294),r(3905)),o=r(2991),i=r(2802);const s={},c="Cheatcodes",l={unversionedId:"tutorials/testing/cheatcodes/README",id:"tutorials/testing/cheatcodes/README",title:"Cheatcodes",description:"Most of the time, testing smart contracts with assertions only is not enough.",source:"@site/docs/tutorials/07-testing/02-cheatcodes/README.md",sourceDirName:"tutorials/07-testing/02-cheatcodes",slug:"/tutorials/testing/cheatcodes/",permalink:"/protostar/docs/tutorials/testing/cheatcodes/",draft:!1,editUrl:"https://github.com/software-mansion/protostar/tree/master/website/docs/tutorials/07-testing/02-cheatcodes/README.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorials",previous:{title:"Deploying contracts from tests",permalink:"/protostar/docs/tutorials/testing/deploying-contracts"},next:{title:"assume",permalink:"/protostar/docs/tutorials/testing/cheatcodes/assume"}},u={},m=[{value:"Available cheatcodes",id:"available-cheatcodes",level:2},{value:"Data Transformer",id:"data-transformer",level:2},{value:"What is a Data Transformer",id:"what-is-a-data-transformer",level:3},{value:"Using Data Transformer in cheatcodes",id:"using-data-transformer-in-cheatcodes",level:3},{value:"Example",id:"example",level:3}],p={toc:m};function d(t){let{components:e,...r}=t;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"cheatcodes"},"Cheatcodes"),(0,a.kt)("p",null,"Most of the time, testing smart contracts with assertions only is not enough.\nSome test cases require manipulating the state of the blockchain, as well as checking for reverts and events.\nFor that reason, Protostar provides a set of cheatcodes."),(0,a.kt)("p",null,"Cheatcodes are available inside of ",(0,a.kt)("a",{parentName:"p",href:"https://www.cairo-lang.org/docs/hello_cairo/program_input.html#hints"},"Cairo hints"),".\nYou don't have to import anything.\nWhen Protostar runs tests, it replaces some core elements in ",(0,a.kt)("a",{parentName:"p",href:"https://pypi.org/project/cairo-lang/"},"cairo-lang")," library and inject cheatcodes to the hint scope."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you are familiar with ",(0,a.kt)("a",{parentName:"p",href:"https://book.getfoundry.sh/forge/cheatcodes.html"},"Foundry"),", you will recognize most cheatcodes.")),(0,a.kt)("h2",{id:"available-cheatcodes"},"Available cheatcodes"),(0,a.kt)(o.Z,{items:(0,i.jA)().items,mdxType:"DocCardList"}),(0,a.kt)("h2",{id:"data-transformer"},"Data Transformer"),(0,a.kt)("h3",{id:"what-is-a-data-transformer"},"What is a Data Transformer"),(0,a.kt)("p",null,"Data Transformer converts inputs and outputs of Cairo functions to Python friendly representation. Cairo internally operates on a list of integers, which readability and maintenance becomes problematic for complex data structures. You can read more about: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://starknetpy.readthedocs.io/en/latest/guide.html?highlight=Data%20transformer#data-transformation"},"Data Transformer in the Starknet.py's documentation"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.cairo-lang.org/docs/hello_starknet/more_features.html#passing-tuples-and-structs-in-calldata"},"representing tuples and structs as a list of integers in the official documentation"))),(0,a.kt)("h3",{id:"using-data-transformer-in-cheatcodes"},"Using Data Transformer in cheatcodes"),(0,a.kt)("p",null,"Cheatcodes accept arguments representing input or output of a Cairo function as:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"List[int]")," \u2014 a list of integers"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Dict[DataTransformer.ArgumentName, DataTransformer.SupportedType]")," \u2014 Data Transformer friendly dictionary")),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)("p",null,"The following example demonstrate usage on the ",(0,a.kt)("a",{parentName:"p",href:"/protostar/docs/tutorials/testing/cheatcodes/deploy-contract"},(0,a.kt)("inlineCode",{parentName:"a"},"deploy_contract")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cairo",metastring:'title="./src/main.cairo"',title:'"./src/main.cairo"'},"%lang starknet\nfrom starkware.cairo.common.uint256 import Uint256\n\n@constructor\nfunc constructor(initial_balance: Uint256, contract_id: felt) {\n    // ...\n    return ();\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="Passing constructor data as a dictionary"',title:'"Passing',constructor:!0,data:!0,as:!0,a:!0,'dictionary"':!0},'deploy_contract("./src/main.cairo", { "initial_balance": 42, "contract_id": 123 })\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="Passing constructor data as a list of integers"',title:'"Passing',constructor:!0,data:!0,as:!0,a:!0,list:!0,of:!0,'integers"':!0},'deploy_contract("./src/main.cairo", [42, 0, 123])\n')))}d.isMDXComponent=!0}}]);